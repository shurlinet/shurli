<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 360" width="800" height="360">
  <!-- Batch C In-Content: Commit-Confirmed Flow
       Shows: apply config → timer starts → either confirm (keeps) or timeout (auto-rollback) -->
  <defs>
    <linearGradient id="ccGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#7aa2f7"/>
      <stop offset="100%" style="stop-color:#bb9af7"/>
    </linearGradient>
  </defs>
  <!-- Background -->
  <rect width="800" height="360" rx="12" fill="#0f1117"/>
  <!-- Title -->
  <text x="400" y="36" text-anchor="middle" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="15" font-weight="600">The Commit-Confirmed Pattern</text>
  <!-- Step 1: Apply -->
  <rect x="40" y="65" width="150" height="60" rx="8" fill="#1a1b26" stroke="#7aa2f7" stroke-width="2"/>
  <text x="115" y="92" text-anchor="middle" fill="#7aa2f7" font-family="monospace" font-size="11" font-weight="600">config apply</text>
  <text x="115" y="110" text-anchor="middle" fill="#565f89" font-family="monospace" font-size="10">--confirm-timeout 5m</text>
  <!-- Arrow 1→2 -->
  <line x1="190" y1="95" x2="225" y2="95" stroke="#565f89" stroke-width="2"/>
  <polygon points="223,89 235,95 223,101" fill="#565f89"/>
  <!-- Step 2: Archive + Apply -->
  <rect x="235" y="55" width="160" height="80" rx="8" fill="#1a1b26" stroke="#e0af68" stroke-width="2"/>
  <text x="315" y="80" text-anchor="middle" fill="#e0af68" font-family="monospace" font-size="11" font-weight="600">archive current</text>
  <text x="315" y="98" text-anchor="middle" fill="#565f89" font-family="monospace" font-size="10">.config.last-good.yaml</text>
  <text x="315" y="118" text-anchor="middle" fill="#e0af68" font-family="monospace" font-size="11">apply new config</text>
  <!-- Arrow 2→3 -->
  <line x1="395" y1="95" x2="430" y2="95" stroke="#565f89" stroke-width="2"/>
  <polygon points="428,89 440,95 428,101" fill="#565f89"/>
  <!-- Step 3: Timer starts -->
  <rect x="440" y="65" width="140" height="60" rx="8" fill="#1a1b26" stroke="#bb9af7" stroke-width="2"/>
  <text x="510" y="88" text-anchor="middle" fill="#bb9af7" font-family="monospace" font-size="11" font-weight="600">⏱ timer starts</text>
  <text x="510" y="108" text-anchor="middle" fill="#bb9af7" font-family="monospace" font-size="11">5 min countdown</text>
  <!-- Branch: Two paths from timer -->
  <!-- Path A: User confirms (top path - success) -->
  <line x1="580" y1="82" x2="620" y2="60" stroke="#9ece6a" stroke-width="2"/>
  <polygon points="617,53 628,57 619,65" fill="#9ece6a"/>
  <rect x="628" y="35" width="150" height="55" rx="8" fill="#1a1b26" stroke="#9ece6a" stroke-width="2"/>
  <text x="703" y="58" text-anchor="middle" fill="#9ece6a" font-family="monospace" font-size="11" font-weight="600">config confirm</text>
  <text x="703" y="78" text-anchor="middle" fill="#9ece6a" font-family="monospace" font-size="10">✓ new config kept</text>
  <!-- Path B: Timeout (bottom path - rollback) -->
  <line x1="580" y1="108" x2="620" y2="135" stroke="#f7768e" stroke-width="2"/>
  <polygon points="617,130 628,138 619,140" fill="#f7768e"/>
  <rect x="628" y="110" width="150" height="55" rx="8" fill="#1a1b26" stroke="#f7768e" stroke-width="2"/>
  <text x="703" y="133" text-anchor="middle" fill="#f7768e" font-family="monospace" font-size="11" font-weight="600">timeout!</text>
  <text x="703" y="153" text-anchor="middle" fill="#f7768e" font-family="monospace" font-size="10">⟲ auto-rollback</text>
  <!-- Scenario illustration below -->
  <rect x="40" y="195" width="720" height="130" rx="8" fill="#1a1b26" stroke="#24283b" stroke-width="1"/>
  <text x="400" y="220" text-anchor="middle" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="13" font-weight="600">Why this matters for remote access</text>
  <!-- Scenario flow -->
  <text x="60" y="248" fill="#7aa2f7" font-family="monospace" font-size="11">1.</text>
  <text x="80" y="248" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="12">You SSH into your home server and change the relay address</text>
  <text x="60" y="270" fill="#e0af68" font-family="monospace" font-size="11">2.</text>
  <text x="80" y="270" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="12">The new relay address is wrong - you lose connectivity</text>
  <text x="60" y="292" fill="#9ece6a" font-family="monospace" font-size="11">3.</text>
  <text x="80" y="292" fill="#9ece6a" font-family="system-ui,sans-serif" font-size="12">After 5 minutes, Shurli reverts to the working config and restarts</text>
  <text x="60" y="312" fill="#9ece6a" font-family="monospace" font-size="11">4.</text>
  <text x="80" y="312" fill="#9ece6a" font-family="system-ui,sans-serif" font-size="12">You can SSH in again - no physical access needed</text>
  <!-- Bottom note -->
  <text x="400" y="350" text-anchor="middle" fill="#565f89" font-family="system-ui,sans-serif" font-size="12">Inspired by network engineering's "commit confirmed" - a decades-proven pattern for safe remote config changes</text>
</svg>
