<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 360" width="800" height="360">
  <!-- Batch D In-Content: Transport Priority Stack
       Shows QUIC > TCP > WebSocket ordering with characteristics -->
  <!-- Background -->
  <rect width="800" height="360" rx="12" fill="#141316"/>
  <!-- Title -->
  <text x="400" y="36" text-anchor="middle" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="15" font-weight="600">Transport Negotiation Priority</text>
  <text x="400" y="56" text-anchor="middle" fill="#565f89" font-family="system-ui,sans-serif" font-size="12">First transport to succeed wins - tried in parallel, ranked by preference</text>
  <!-- Priority 1: QUIC -->
  <rect x="100" y="80" width="600" height="70" rx="8" fill="#1a191c" stroke="#9ece6a" stroke-width="2"/>
  <rect x="100" y="80" width="40" height="70" rx="8" fill="#9ece6a" fill-opacity="0.15"/>
  <rect x="140" y="80" width="0" height="70" fill="#9ece6a" fill-opacity="0"/>
  <text x="120" y="122" text-anchor="middle" fill="#9ece6a" font-family="monospace" font-size="20" font-weight="700">1</text>
  <text x="170" y="105" fill="#9ece6a" font-family="system-ui,sans-serif" font-size="15" font-weight="700">QUIC</text>
  <text x="240" y="105" fill="#565f89" font-family="system-ui,sans-serif" font-size="12">(preferred)</text>
  <text x="170" y="125" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="12">0-RTT connection establishment • Native multiplexing • Built-in encryption</text>
  <text x="170" y="143" fill="#565f89" font-family="system-ui,sans-serif" font-size="11">UDP-based - may be blocked by some corporate firewalls</text>
  <!-- Priority 2: TCP -->
  <rect x="100" y="165" width="600" height="70" rx="8" fill="#1a191c" stroke="#e8729a" stroke-width="2"/>
  <rect x="100" y="165" width="40" height="70" rx="8" fill="#e8729a" fill-opacity="0.15"/>
  <rect x="140" y="165" width="0" height="70" fill="#e8729a" fill-opacity="0"/>
  <text x="120" y="207" text-anchor="middle" fill="#e8729a" font-family="monospace" font-size="20" font-weight="700">2</text>
  <text x="170" y="190" fill="#e8729a" font-family="system-ui,sans-serif" font-size="15" font-weight="700">TCP</text>
  <text x="215" y="190" fill="#565f89" font-family="system-ui,sans-serif" font-size="12">(universal fallback)</text>
  <text x="170" y="210" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="12">Works everywhere • Reliable delivery • Noise protocol for encryption + muxing</text>
  <text x="170" y="228" fill="#565f89" font-family="system-ui,sans-serif" font-size="11">Higher latency (3-way handshake) - but passes through virtually any network</text>
  <!-- Priority 3: WebSocket -->
  <rect x="100" y="250" width="600" height="70" rx="8" fill="#1a191c" stroke="#bb9af7" stroke-width="2"/>
  <rect x="100" y="250" width="40" height="70" rx="8" fill="#bb9af7" fill-opacity="0.15"/>
  <rect x="140" y="250" width="0" height="70" fill="#bb9af7" fill-opacity="0"/>
  <text x="120" y="292" text-anchor="middle" fill="#bb9af7" font-family="monospace" font-size="20" font-weight="700">3</text>
  <text x="170" y="275" fill="#bb9af7" font-family="system-ui,sans-serif" font-size="15" font-weight="700">WebSocket</text>
  <text x="270" y="275" fill="#565f89" font-family="system-ui,sans-serif" font-size="12">(anti-censorship)</text>
  <text x="170" y="295" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="12">HTTP upgrade handshake • Passes through HTTP proxies • Browser-compatible</text>
  <text x="170" y="313" fill="#565f89" font-family="system-ui,sans-serif" font-size="11">Highest overhead - but works even when TCP and UDP are filtered</text>
  <!-- Bottom note -->
  <text x="400" y="348" text-anchor="middle" fill="#565f89" font-family="system-ui,sans-serif" font-size="12">libp2p tries all transports in parallel • First successful connection wins • Relay addresses always in peerstore</text>
</svg>
