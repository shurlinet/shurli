<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 380" width="800" height="380">
  <!-- Batch G In-Content: Docker Integration Test Topology
       Shows: 3 containers (relay + node-a + node-b) communicating through circuit relay -->
  <defs>
    <linearGradient id="dtGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#7aa2f7"/>
      <stop offset="100%" style="stop-color:#bb9af7"/>
    </linearGradient>
  </defs>
  <!-- Background -->
  <rect width="800" height="380" rx="12" fill="#0f1117"/>
  <!-- Title -->
  <text x="400" y="36" text-anchor="middle" fill="#a9b1d6" font-family="system-ui,sans-serif" font-size="15" font-weight="600">Docker Integration Test Topology</text>
  <text x="400" y="56" text-anchor="middle" fill="#565f89" font-family="system-ui,sans-serif" font-size="12">Real binaries in real containers - tests the full invite/join/ping flow</text>
  <!-- Docker Compose boundary -->
  <rect x="40" y="70" width="720" height="210" rx="10" fill="none" stroke="#565f89" stroke-width="1" stroke-dasharray="6,4"/>
  <text x="60" y="90" fill="#565f89" font-family="monospace" font-size="11">docker-compose.test.yaml</text>
  <!-- Relay container -->
  <rect x="290" y="100" width="220" height="80" rx="8" fill="#1a1b26" stroke="#e0af68" stroke-width="2"/>
  <text x="400" y="125" text-anchor="middle" fill="#e0af68" font-family="system-ui,sans-serif" font-size="14" font-weight="600">Relay Server</text>
  <text x="400" y="145" text-anchor="middle" fill="#a9b1d6" font-family="monospace" font-size="11">peerup relay serve</text>
  <text x="400" y="165" text-anchor="middle" fill="#565f89" font-family="monospace" font-size="10">:4001 QUIC + TCP</text>
  <!-- Node A container -->
  <rect x="60" y="205" width="200" height="65" rx="8" fill="#1a1b26" stroke="#7aa2f7" stroke-width="2"/>
  <text x="160" y="230" text-anchor="middle" fill="#7aa2f7" font-family="system-ui,sans-serif" font-size="14" font-weight="600">Node A</text>
  <text x="160" y="250" text-anchor="middle" fill="#a9b1d6" font-family="monospace" font-size="11">peerup init + invite</text>
  <!-- Node B container -->
  <rect x="540" y="205" width="200" height="65" rx="8" fill="#1a1b26" stroke="#bb9af7" stroke-width="2"/>
  <text x="640" y="230" text-anchor="middle" fill="#bb9af7" font-family="system-ui,sans-serif" font-size="14" font-weight="600">Node B</text>
  <text x="640" y="250" text-anchor="middle" fill="#a9b1d6" font-family="monospace" font-size="11">peerup join + ping</text>
  <!-- Connection lines -->
  <!-- Node A to Relay -->
  <line x1="200" y1="205" x2="320" y2="180" stroke="#7aa2f7" stroke-width="2"/>
  <text x="120" y="194" fill="#7aa2f7" font-family="monospace" font-size="9">circuit relay</text>
  <!-- Node B to Relay -->
  <line x1="600" y1="205" x2="480" y2="180" stroke="#bb9af7" stroke-width="2"/>
  <text x="720" y="194" text-anchor="end" fill="#bb9af7" font-family="monospace" font-size="9">circuit relay</text>
  <!-- Bidirectional between nodes (through relay) -->
  <line x1="260" y1="237" x2="540" y2="237" stroke="url(#dtGrad)" stroke-width="2" stroke-dasharray="8,4"/>
  <text x="400" y="232" text-anchor="middle" fill="#9ece6a" font-family="monospace" font-size="10">ping through relay</text>
  <!-- Test sequence below -->
  <rect x="40" y="290" width="720" height="70" rx="8" fill="#1a1b26" stroke="#24283b" stroke-width="1"/>
  <text x="60" y="312" fill="#565f89" font-family="system-ui,sans-serif" font-size="12" font-weight="600">Test Sequence:</text>
  <!-- Steps -->
  <rect x="60" y="322" width="125" height="26" rx="4" fill="#e0af68" fill-opacity="0.1"/>
  <text x="122" y="340" text-anchor="middle" fill="#e0af68" font-family="monospace" font-size="10">1. relay starts</text>
  <line x1="185" y1="335" x2="205" y2="335" stroke="#565f89" stroke-width="1"/>
  <polygon points="203,331 211,335 203,339" fill="#565f89"/>
  <rect x="210" y="322" width="125" height="26" rx="4" fill="#7aa2f7" fill-opacity="0.1"/>
  <text x="272" y="340" text-anchor="middle" fill="#7aa2f7" font-family="monospace" font-size="10">2. node-a init</text>
  <line x1="335" y1="335" x2="355" y2="335" stroke="#565f89" stroke-width="1"/>
  <polygon points="353,331 361,335 353,339" fill="#565f89"/>
  <rect x="360" y="322" width="125" height="26" rx="4" fill="#7aa2f7" fill-opacity="0.1"/>
  <text x="422" y="340" text-anchor="middle" fill="#7aa2f7" font-family="monospace" font-size="10">3. invite</text>
  <line x1="485" y1="335" x2="505" y2="335" stroke="#565f89" stroke-width="1"/>
  <polygon points="503,331 511,335 503,339" fill="#565f89"/>
  <rect x="510" y="322" width="125" height="26" rx="4" fill="#bb9af7" fill-opacity="0.1"/>
  <text x="572" y="340" text-anchor="middle" fill="#bb9af7" font-family="monospace" font-size="10">4. node-b join</text>
  <line x1="635" y1="335" x2="655" y2="335" stroke="#565f89" stroke-width="1"/>
  <polygon points="653,331 661,335 653,339" fill="#565f89"/>
  <rect x="660" y="322" width="90" height="26" rx="4" fill="#9ece6a" fill-opacity="0.1"/>
  <text x="705" y="340" text-anchor="middle" fill="#9ece6a" font-family="monospace" font-size="10">5. ping ✓</text>
  <!-- Bottom -->
  <text x="400" y="376" text-anchor="middle" fill="#565f89" font-family="system-ui,sans-serif" font-size="12">Build tag "integration" • Coverage merged with go tool covdata • Real network I/O, no mocks</text>
</svg>
