{{/* Override of Hextra's opengraph.html - fixes whitespace in meta content attributes */}}

{{- $description := "" -}}
{{- with .Description -}}
  {{- $description = . -}}
{{- else -}}
  {{- if .IsPage -}}
    {{- $description = .Summary | plainify | htmlUnescape | strings.TrimSpace | truncate 200 -}}
  {{- else -}}
    {{- with .Site.Params.description -}}
      {{- $description = . -}}
    {{- end -}}
  {{- end -}}
{{- end -}}

{{- $ogType := cond .IsPage "article" "website" -}}

<meta property="og:title" content="{{ .Title }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:type" content="{{ $ogType }}">
<meta property="og:url" content="{{ .Permalink }}">

{{- with $.Params.images -}}
  {{- range first 6 . }}
<meta property="og:image" content="{{ . | absURL }}">
  {{- end -}}
{{- else -}}
  {{- with $.Params.image }}
<meta property="og:image" content="{{ . | absURL }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
  {{- else -}}
    {{- with $.Site.Params.images }}
<meta property="og:image" content="{{ index . 0 | absURL }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
    {{- end -}}
  {{- end -}}
{{- end -}}

{{- if .IsPage }}
{{- $iso8601 := "2006-01-02T15:04:05-07:00" -}}
<meta property="article:section" content="{{ .Section }}">
{{- with .PublishDate }}
<meta property="article:published_time" {{ .Format $iso8601 | printf "content=%q" | safeHTMLAttr }}>
{{- end }}
{{- with .Lastmod }}
<meta property="article:modified_time" {{ .Format $iso8601 | printf "content=%q" | safeHTMLAttr }}>
{{- end }}
{{- end -}}

{{- with .Params.audio }}
<meta property="og:audio" content="{{ . }}">
{{- end -}}
{{- with .Params.locale }}
<meta property="og:locale" content="{{ . }}">
{{- else }}
<meta property="og:locale" content="en_US">
{{- end -}}
{{- with .Site.Params.title }}
<meta property="og:site_name" content="{{ . }}">
{{- else }}
<meta property="og:site_name" content="{{ .Site.Title }}">
{{- end -}}
{{- with .Params.videos }}
{{- range . }}
<meta property="og:video" content="{{ . | absURL }}">
{{- end }}
{{- end -}}
