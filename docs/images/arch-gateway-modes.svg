<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 480" width="900" height="480">
  <defs>
    <linearGradient id="appFill" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2c2a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e1d20;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="middleFill" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#38353b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2a282c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="networkFill" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1e3a2f;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#162c24;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="kernelFill" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2d4561;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e2d40;stop-opacity:1" />
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="480" rx="12" fill="#141316"/>

  <!-- Title -->
  <text x="450" y="28" font-family="system-ui, sans-serif" font-size="14" fill="#c0caf5" text-anchor="middle" font-weight="600">Gateway Daemon Modes</text>
  <!-- Planned badge -->
  <rect x="745" y="10" width="140" height="22" rx="11" fill="#e0af68" opacity="0.15" stroke="#e0af68" stroke-width="1"/>
  <text x="815" y="25" font-family="SF Mono, monospace" font-size="10" fill="#e0af68" text-anchor="middle" font-weight="600">PLANNED - Phase 8</text>

  <!-- Column dividers -->
  <line x1="300" y1="45" x2="300" y2="460" stroke="#565f89" stroke-width="1" stroke-dasharray="4,3" opacity="0.2"/>
  <line x1="600" y1="45" x2="600" y2="460" stroke="#565f89" stroke-width="1" stroke-dasharray="4,3" opacity="0.2"/>

  <!-- ====== MODE 1: SOCKS Proxy ====== -->
  <text x="150" y="55" font-family="system-ui, sans-serif" font-size="12" fill="#e8729a" text-anchor="middle" font-weight="600">Mode 1: SOCKS Proxy</text>
  <text x="150" y="70" font-family="SF Mono, monospace" font-size="9" fill="#9ece6a" text-anchor="middle">No root required</text>

  <!-- Apps -->
  <rect x="40" y="85" width="220" height="50" rx="8" fill="url(#appFill)" stroke="#da1c5c" stroke-width="1.2"/>
  <text x="150" y="105" font-family="system-ui, sans-serif" font-size="10" fill="#c0caf5" text-anchor="middle" font-weight="600">Applications</text>
  <text x="150" y="120" font-family="SF Mono, monospace" font-size="8" fill="#565f89" text-anchor="middle">configured to use SOCKS</text>

  <!-- Arrow -->
  <line x1="150" y1="135" x2="150" y2="160" stroke="#e8729a" stroke-width="1.5"/>
  <polygon points="146,157 154,157 150,164" fill="#e8729a"/>

  <!-- SOCKS5 -->
  <rect x="40" y="167" width="220" height="75" rx="8" fill="url(#middleFill)" stroke="#bb9af7" stroke-width="1.2"/>
  <text x="150" y="188" font-family="system-ui, sans-serif" font-size="10" fill="#bb9af7" text-anchor="middle" font-weight="600">SOCKS5 Proxy</text>
  <text x="150" y="204" font-family="SF Mono, monospace" font-size="9" fill="#e0af68" text-anchor="middle">localhost:1080</text>
  <text x="150" y="222" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">name:port → peer ID → P2P</text>

  <!-- Arrow -->
  <line x1="150" y1="242" x2="150" y2="267" stroke="#9ece6a" stroke-width="1.5"/>
  <polygon points="146,264 154,264 150,271" fill="#9ece6a"/>

  <!-- P2P -->
  <rect x="40" y="274" width="220" height="45" rx="8" fill="url(#networkFill)" stroke="#9ece6a" stroke-width="1.2"/>
  <text x="150" y="300" font-family="system-ui, sans-serif" font-size="10" fill="#9ece6a" text-anchor="middle" font-weight="600">P2P Network</text>

  <!-- ====== MODE 2: DNS Server ====== -->
  <text x="450" y="55" font-family="system-ui, sans-serif" font-size="12" fill="#e8729a" text-anchor="middle" font-weight="600">Mode 2: DNS Server</text>
  <text x="450" y="70" font-family="SF Mono, monospace" font-size="9" fill="#e0af68" text-anchor="middle">Root for port 53</text>

  <!-- Apps -->
  <rect x="340" y="85" width="220" height="50" rx="8" fill="url(#appFill)" stroke="#da1c5c" stroke-width="1.2"/>
  <text x="450" y="105" font-family="system-ui, sans-serif" font-size="10" fill="#c0caf5" text-anchor="middle" font-weight="600">Applications</text>
  <text x="450" y="120" font-family="SF Mono, monospace" font-size="8" fill="#565f89" text-anchor="middle">use system DNS</text>

  <!-- Arrow with label -->
  <line x1="450" y1="135" x2="450" y2="160" stroke="#e8729a" stroke-width="1.5"/>
  <polygon points="446,157 454,157 450,164" fill="#e8729a"/>
  <text x="520" y="152" font-family="SF Mono, monospace" font-size="8" fill="#565f89">DNS query</text>

  <!-- DNS Server -->
  <rect x="340" y="167" width="220" height="75" rx="8" fill="url(#middleFill)" stroke="#bb9af7" stroke-width="1.2"/>
  <text x="450" y="188" font-family="system-ui, sans-serif" font-size="10" fill="#bb9af7" text-anchor="middle" font-weight="600">Local DNS Server</text>
  <text x="450" y="204" font-family="SF Mono, monospace" font-size="9" fill="#e0af68" text-anchor="middle">localhost:53</text>
  <text x="450" y="222" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">name.p2p → virtual IP → peer ID</text>

  <!-- Arrow -->
  <line x1="450" y1="242" x2="450" y2="267" stroke="#9ece6a" stroke-width="1.5"/>
  <polygon points="446,264 454,264 450,271" fill="#9ece6a"/>

  <!-- Virtual IP Router -->
  <rect x="340" y="274" width="220" height="45" rx="8" fill="url(#networkFill)" stroke="#9ece6a" stroke-width="1.2"/>
  <text x="450" y="294" font-family="system-ui, sans-serif" font-size="10" fill="#9ece6a" text-anchor="middle" font-weight="600">Virtual IP Router → P2P</text>

  <!-- ====== MODE 3: TUN/TAP ====== -->
  <text x="750" y="55" font-family="system-ui, sans-serif" font-size="12" fill="#e8729a" text-anchor="middle" font-weight="600">Mode 3: TUN/TAP</text>
  <text x="750" y="70" font-family="SF Mono, monospace" font-size="9" fill="#f7768e" text-anchor="middle">Requires root</text>

  <!-- Apps -->
  <rect x="640" y="85" width="220" height="50" rx="8" fill="url(#appFill)" stroke="#da1c5c" stroke-width="1.2"/>
  <text x="750" y="105" font-family="system-ui, sans-serif" font-size="10" fill="#c0caf5" text-anchor="middle" font-weight="600">Applications</text>
  <text x="750" y="120" font-family="SF Mono, monospace" font-size="8" fill="#565f89" text-anchor="middle">completely transparent</text>

  <!-- Arrow with label -->
  <line x1="750" y1="135" x2="750" y2="160" stroke="#e8729a" stroke-width="1.5"/>
  <polygon points="746,157 754,157 750,164" fill="#e8729a"/>
  <text x="820" y="152" font-family="SF Mono, monospace" font-size="8" fill="#565f89">TCP/UDP</text>

  <!-- Kernel Stack -->
  <rect x="640" y="167" width="220" height="35" rx="8" fill="url(#kernelFill)" stroke="#e8729a" stroke-width="1"/>
  <text x="750" y="189" font-family="system-ui, sans-serif" font-size="10" fill="#e8729a" text-anchor="middle" font-weight="600">Kernel Network Stack</text>

  <!-- Arrow -->
  <line x1="750" y1="202" x2="750" y2="215" stroke="#e8729a" stroke-width="1.5"/>
  <polygon points="746,212 754,212 750,219" fill="#e8729a"/>

  <!-- TUN Interface -->
  <rect x="640" y="222" width="220" height="55" rx="8" fill="url(#middleFill)" stroke="#bb9af7" stroke-width="1.2"/>
  <text x="750" y="242" font-family="system-ui, sans-serif" font-size="10" fill="#bb9af7" text-anchor="middle" font-weight="600">TUN Interface (peer0)</text>
  <text x="750" y="258" font-family="SF Mono, monospace" font-size="9" fill="#e0af68" text-anchor="middle">10.64.0.1/16</text>
  <text x="750" y="270" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">intercepts 10.64.0.0/16</text>

  <!-- Arrow -->
  <line x1="750" y1="277" x2="750" y2="297" stroke="#9ece6a" stroke-width="1.5"/>
  <polygon points="746,294 754,294 750,301" fill="#9ece6a"/>

  <!-- Gateway Daemon -->
  <rect x="640" y="304" width="220" height="45" rx="8" fill="url(#networkFill)" stroke="#9ece6a" stroke-width="1.2"/>
  <text x="750" y="324" font-family="system-ui, sans-serif" font-size="10" fill="#9ece6a" text-anchor="middle" font-weight="600">Gateway Daemon → P2P</text>
  <text x="750" y="340" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">packet → peer ID → stream</text>

  <!-- Comparison footer -->
  <rect x="40" y="370" width="820" height="95" rx="8" fill="#1e1d20" stroke="#565f89" stroke-width="0.8" opacity="0.5"/>
  <text x="450" y="392" font-family="system-ui, sans-serif" font-size="11" fill="#c0caf5" text-anchor="middle" font-weight="600">Trade-offs</text>

  <text x="150" y="415" font-family="system-ui, sans-serif" font-size="10" fill="#9ece6a" text-anchor="middle" font-weight="600">SOCKS</text>
  <text x="150" y="432" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">No root needed</text>
  <text x="150" y="446" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">Apps must be configured</text>

  <text x="450" y="415" font-family="system-ui, sans-serif" font-size="10" fill="#e0af68" text-anchor="middle" font-weight="600">DNS</text>
  <text x="450" y="432" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">Root for port 53</text>
  <text x="450" y="446" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">Virtual IPs, near-transparent</text>

  <text x="750" y="415" font-family="system-ui, sans-serif" font-size="10" fill="#f7768e" text-anchor="middle" font-weight="600">TUN/TAP</text>
  <text x="750" y="432" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">Root required</text>
  <text x="750" y="446" font-family="SF Mono, monospace" font-size="8" fill="#a9b1d6" text-anchor="middle">Fully transparent, any app</text>
</svg>
